global
    log stdout format raw local0
    maxconn 4096

defaults
    log global
    mode tcp
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option tcplog

# Stats endpoint
listen stats
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats refresh 30s

# Cassandra backend
frontend cassandra_frontend
    bind *:9042
    default_backend cassandra_backend

backend cassandra_backend
    balance roundrobin
    option tcp-check
    tcp-check connect
    tcp-check send PING\r\n
    tcp-check expect string PONG
    server cassandra1 cassandra:9042 check

